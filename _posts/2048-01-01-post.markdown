---
layout: post
title:  "Some Clever Pun Involving Poker And Math And Magic"
date:   2020-08-25 03:43:00 -0800
---

Here's a neat magic trick that involves no magic, only math.

The setup: you and a partner invite a volunteer to the stage. You present
the volunteer with a standard 52 card deck of playing cards. You close your eyes,
while your partner asks the volunteer to pick 5 arbitrary cards from the deck.
Your partner places one of the 5 cards into his or her pocket, then deals the
4 remaining cards in some order.

You then open your eyes, look at the 4 cards dealt, and name the missing card to
much fanfare. To show there is no trickery, you ask someone else to come up and
pick 5 cards, and again you succeed. And again, and again...

The puzzle: devise a scheme that makes this trick possible.

\*\*\*
{: .centered }

As with most limited information puzzles, the first reaction of most people is to
find creative ways to communicate more information than intended, so here are
the more extensive rules.

- The scheme must work with any choice of 5 cards from the deck.
- The predictor sees 4 of the cards, and their ordering. No other information is
allowed.
- After removing a card, the partner must deal all 4 remaining cards.

This is meant to be a puzzle, so before I spoil the solution, you may want to
spend some time figuring it out yourself.

Hint 1:

> It's important that 5 cards are chosen - the scheme does not work if there are
> fewer than 5 cards picked.
{: .spoiler }

Hint 2:

> Assign a canonical ordering 1 to 52 on the deck of cards. You have no control
> over what cards you get, so the scheme should only rely on the different permutations
> of the remaining cards.
{: .spoiler }

Hint 3:

> You do have control over which card to remove. In any given 5 cards, there is
> exactly 1 card you can remove to make the scheme work.
{: .spoiler }

Now, the solution.

Although not stricly necessary, we can first verify this is doable. There are
$$\binom{52}{5}$$ ways to pick $$5$$ cards. The $$4$$ cards seen have order,
so there are $$52 \cdot 51 \cdot 50 \cdot 49$$ outputs.

(Relevant picture)

If we can predict the missing card, then we know all 5 initial cards.
If $$52\cdot 51\cdot 50 \cdot 49 < \binom{52}{5}$$, then by Pigeonhole Principle
there would be some output that corresponds to at least 2 different inputs,
and no such scheme would exist. This isn't true, which is good. (This setup
isn't exact, because an input of 5 cards can only end at a subset of the range.
But these subsets intersect, which makes counting the possibilities difficult, and this
really isn't the focus.)

TODO do the counts.

First observation, 2 cards of same suit by pigeonhole, use 1 to denote the suit.
Under ordering, $$3! = 6$$ options.
Note that two numbers from 1 to 13 separated by at most 6 if you allow counting over,
pick lower.
